

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Computer Number Systems &mdash; ACSL Lecture 1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="ACSL Lecture 1.0 documentation" href="../../index.html"/>
        <link rel="up" title="Lec 3: Topics of Contest #1" href="index.html"/>
        <link rel="next" title="Recursive Functions" href="recursive.html"/>
        <link rel="prev" title="Lec 3: Topics of Contest #1" href="index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> ACSL Lecture
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../lect00/index.html">Lec 0: About ACSL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lect01/index.html">Lec 1: Python Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lect02/index.html">Lec 2: Things you already know</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Lec 3: Topics of Contest #1</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Computer Number Systems</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#topic-summary">Topic Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#convert-color-value">1. Convert Color Value</a></li>
<li class="toctree-l4"><a class="reference internal" href="#convert-decimal-to-radix-64">2. Convert Decimal to Radix 64</a></li>
<li class="toctree-l4"><a class="reference internal" href="#leetcode-question-1404">3. LeetCode Question 1404</a></li>
<li class="toctree-l4"><a class="reference internal" href="#roman-numbers">4. Roman Numbers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="recursive.html">Recursive Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="what-prog-do.html">What Does This Program Do?</a></li>
<li class="toctree-l2"><a class="reference internal" href="homework.html">Homework</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref.html">Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lect03p2/index.html">Lec 3: Contest #1, Part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lect04/intro.html">Lec 04: Data Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lect05/intro.html">Lec 05: Matrix &amp; Graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lect06/intro.html">Lec 06: Recursive Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lect07/intro.html">Lec 07: (Bit) String &amp; RegEx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lect08/intro.html">Lec 08: What Does This Program Do?</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ACSL Lecture</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Lec 3: Topics of Contest #1</a> &raquo;</li>
      
    <li>Computer Number Systems</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="computer-number-systems">
<h1>Computer Number Systems<a class="headerlink" href="#computer-number-systems" title="Permalink to this headline">¶</a></h1>
<div class="section" id="topic-summary">
<h2>Topic Summary<a class="headerlink" href="#topic-summary" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="../lect02/num-sys.html#l2-comp-num-sys"><span class="std std-ref">Topic Summary</span></a> in lec 2.</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Let’s have our skill progressing into a new level.</p>
<div class="section" id="convert-color-value">
<h3>1. Convert Color Value<a class="headerlink" href="#convert-color-value" title="Permalink to this headline">¶</a></h3>
<p>In html source, color can be expressed as ‘#0405ff’. Which means:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">red</span><span class="p">:</span> <span class="mi">04</span>
<span class="n">green</span><span class="p">:</span> <span class="mi">05</span>
<span class="n">blue</span><span class="p">:</span> <span class="mi">255</span>
</pre></div>
</div>
<p>The problem is it is a string that can’t been understood internally. Let’s parse
the formated string into 3 integer, each range from 0 ~ 255.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">parseColor</span><span class="p">(</span><span class="n">col</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>   <span class="c1"># &quot;col: str&quot; shows the argument is a str type</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">col</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;#&#39;</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">col</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">col</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">base</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span>
        <span class="n">g</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">col</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">col</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">base</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">col</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="n">col</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="n">base</span> <span class="o">=</span> <span class="mi">16</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>See <a class="reference external" href="https://github.com/odys-z/hello/blob/master/acsl/lect03/ex01/">source and tester</a></p>
</div>
<div class="section" id="convert-decimal-to-radix-64">
<h3>2. Convert Decimal to Radix 64<a class="headerlink" href="#convert-decimal-to-radix-64" title="Permalink to this headline">¶</a></h3>
<p>Problem: Given a string representing a decimal integer, convert it into a base 64
integer.</p>
<p>Solution:</p>
<p>We can use characters from Base64 to represent each digit in radix 64 integer.
They are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span> <span class="o">~</span> <span class="mi">9</span><span class="p">,</span> <span class="n">U</span> <span class="o">~</span> <span class="n">U</span><span class="p">,</span> <span class="n">a</span> <span class="o">~</span> <span class="n">u</span><span class="p">,</span> <span class="o">+</span><span class="p">,</span> <span class="o">-</span>
<span class="n">There</span> <span class="ow">is</span> <span class="n">also</span> <span class="n">an</span> <span class="n">extra</span> <span class="n">char</span><span class="p">,</span> <span class="s1">&#39;=&#39;</span> <span class="n">which</span> <span class="n">we</span> <span class="n">don</span><span class="s1">&#39;t use.</span>
</pre></div>
</div>
<p>To find the correct digits in base 64, we need a table to map value less than 64
into the digit:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">...</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">63</span>
<span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">...</span> <span class="mi">9</span><span class="p">,</span>  <span class="n">A</span><span class="p">,</span>  <span class="n">B</span><span class="p">,</span> <span class="o">...</span>   <span class="n">Z</span><span class="p">,</span>  <span class="n">a</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span>  <span class="n">z</span><span class="p">,</span>  <span class="o">+</span><span class="p">,</span>  <span class="o">/</span>
</pre></div>
</div>
<p>With this table, the conversion is straight forward:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">conv_64</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">v64</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">v10</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>             <span class="c1"># See comment below</span>
    <span class="k">if</span> <span class="n">v10</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;0&#39;</span>

    <span class="k">while</span> <span class="n">v10</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">digit64</span> <span class="o">=</span> <span class="n">v10</span> <span class="o">%</span> <span class="mi">64</span>
        <span class="n">v10</span> <span class="o">//=</span> <span class="mi">64</span>            <span class="c1"># a // b return an integer</span>
        <span class="n">v64</span> <span class="o">=</span> <span class="n">tab64</span><span class="p">[</span><span class="n">digit64</span><span class="p">]</span> <span class="o">+</span> <span class="n">v64</span>

    <span class="k">return</span> <span class="n">v64</span>
</pre></div>
</div>
<p>In this function, we use python int() function to brutally convert the whole
string into one large integer, and divide it by 64 each time. This is time
consuming and using a lot of memory.</p>
<p>For reference answer, see <a class="reference external" href="https://github.com/odys-z/hello/blob/master/acsl-pydev/acsl/lect03/dec_r64.py">here</a>.</p>
<p>For python implementation, see <a class="reference external" href="https://github.com/python/cpython/blob/7668a8bc93c2bd573716d1bea0f52ea520502b28/Modules/binascii.c">python source at github</a></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span> <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">table_b2a_base64</span><span class="p">[]</span> <span class="o">=</span>
<span class="s">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;</span><span class="p">;</span>
</pre></div>
</div>
<ul class="simple">
<li>A step further</li>
</ul>
<p>There is a way to optimize this. As a radix 64 digit alway corresponding to a 6-bit
integer, we can scan 6 bits a time and convert it into base 64 representation.</p>
<p>Find a basic introduction about Base64 and open source for the conversion if you
are interested. Scan and convert is very important for Base64 conversion as it
is always used in large bulk of data transmission. Converting from thousands of
bytes into on single integer is not acceptable.</p>
</div>
<div class="section" id="leetcode-question-1404">
<h3>3. LeetCode Question 1404<a class="headerlink" href="#leetcode-question-1404" title="Permalink to this headline">¶</a></h3>
<p>Question:</p>
<p><a class="reference external" href="https://leetcode.com/problems/number-of-steps-to-reduce-a-number-in-binary-representation-to-one/">Number of Steps to Reduce a Number in Binary Representation to One</a>.</p>
<p>Given a number s in their binary representation. Return the number of steps to
reduce it to 1 under the following rules:</p>
<blockquote>
<div><p>If the current number is even, you have to divide it by 2.</p>
<p>If the current number is odd, you have to add 1 to it.</p>
<p>It’s guaranteed that you can always reach to one for all testcases.</p>
</div></blockquote>
<p>See <a class="reference external" href="https://leetcode.com/problems/number-of-steps-to-reduce-a-number-in-binary-representation-to-one/">examples there</a>.</p>
<p>test cases</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{array}{l|c}
\hline
Input &amp; Output \\
\hline
1101  &amp; 6 \\
10    &amp; 1 \\
1111  &amp; 5 \\
011111111011111111 &amp; 19 \\
\end{array}\end{split}\]</div>
<p>With Python, we don’t have to care about integer overflow. In some language, int
type has a maximum limitation, for C++, it’s <span class="math notranslate nohighlight">\(2^{32} - 1\)</span>.</p>
<p>We can take a Python’s advantage, just directly convert a base 2 string into integer:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;10011&#39;</span> <span class="c1"># can be very large, above 2^32 -1</span>
<span class="n">v</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">base</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>This converted integer can be checked like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">numSteps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">v</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">v</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">v</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="n">v</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span>
            <span class="n">c</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">c</span>
</pre></div>
</div>
<p>Save the above code in file “q1404.py”.</p>
<p>To test your python, you can take use of <em>unittest</em> module from python:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">q1404</span> <span class="kn">import</span> <span class="n">Solution</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">unittest</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tester</span> <span class="o">=</span> <span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tester</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">Solution</span><span class="p">()</span><span class="o">.</span><span class="n">numSteps</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>Now try it! Verify the test cases from above table.</p>
<ul class="simple">
<li>A Step Further</li>
</ul>
<p>In some language like Java or C/C++, integer has a maximum limitation. A very large
value represented by a long string can not converted to <strong>int</strong> type. For the
question 1404 of which input s can as long as 500 digits, the above way can not
simply ported to Java or C++, etc.</p>
<p>There are <a class="reference external" href="https://github.com/odys-z/hello/blob/master/acsl/lect03/leetcode.qt/q1404.h">2 C++ solution for reference</a>.
One modified the question, which can only working correctly with input value less
than <span class="math notranslate nohighlight">\(2^{31}-1\)</span>. The other use another way to handle the carry out.</p>
</div>
<div class="section" id="roman-numbers">
<h3>4. Roman Numbers<a class="headerlink" href="#roman-numbers" title="Permalink to this headline">¶</a></h3>
<p>TODO …</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="recursive.html" class="btn btn-neutral float-right" title="Recursive Functions" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Lec 3: Topics of Contest #1" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Odys Zhou.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  false
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../_static/language_data.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>