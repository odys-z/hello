

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Setup Docker Wordpress &mdash; Lectures 1.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Docker Quick Start" href="docker.html" />
    <link rel="prev" title="Tutorial: 3 steps setting up a website" href="3steps.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Lectures
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../acsl/index.html">Welcome to ACSL Lecture!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../amc/index.html">From AMC12 To AIME 2022</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cemc/hypatia-galois-2021.html">CEMC Waterloo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usaco/index.html">Welcome to USACO Exercise</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Acadanymo Project Resources</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="3steps.html">Tutorial: 3 steps setting up a website</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Setup Docker Wordpress</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install-docker">Install Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setup-wordpress">Setup Wordpress</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#option-1-docker-compose">Option 1: Docker Compose</a></li>
<li class="toctree-l4"><a class="reference internal" href="#option-2-independent-mysql-server">Option 2: Independent Mysql Server</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#wordpress-hands-on">Wordpress Hands on</a></li>
<li class="toctree-l3"><a class="reference internal" href="#publish-to-docker-hub">Publish to Docker Hub</a></li>
<li class="toctree-l3"><a class="reference internal" href="#play-with-docker-labs-optional">Play with Docker Labs (Optional)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="docker.html">Docker Quick Start</a></li>
<li class="toctree-l2"><a class="reference internal" href="wp-troubles.html">Troubleshootings</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../notes/leetcode.html">LeetCode Problem Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../misc/miscellaneous.html"><span class="sectnum">1</span> Miscellaneous</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Lectures</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Acadanymo Project Resources</a> &raquo;</li>
        
      <li>Setup Docker Wordpress</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="setup-docker-wordpress">
<h1>Setup Docker Wordpress<a class="headerlink" href="#setup-docker-wordpress" title="Permalink to this headline">¶</a></h1>
<p>Docker is getting popular in recent years. It’s worth to have a try!</p>
<p>Docker Image: A running environment configuration.</p>
<p>Docker Container: A running instance of Docker image.</p>
<div class="section" id="install-docker">
<h2>Install Docker<a class="headerlink" href="#install-docker" title="Permalink to this headline">¶</a></h2>
<p>Skip this if you are folloing the <a class="reference internal" href="3steps.html#tutor-3steps"><span class="std std-ref">3 steps tutorial</span></a>.</p>
<p>Download Docker <a class="reference external" href="https://www.docker.com/get-started">here</a>.
Follow the <a class="reference external" href="https://docs.docker.com/engine/install/ubuntu/">installation instructions</a>.
Or follow <a class="reference internal" href="docker.html#install-docker"><span class="std std-ref">the tutorial here (TODO: comming soon for Windows)</span></a>.</p>
<p>For now, you can think Docker is an advanced virtual machine and can work everywhere.
So Wordpress can provide web page service on it.</p>
</div>
<div class="section" id="setup-wordpress">
<h2>Setup Wordpress<a class="headerlink" href="#setup-wordpress" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://wordpress.org/">Wordpress</a> is a website builder with support from
developers all over the world. And Docker provide us a quick way to use it.</p>
<p>Two different way of deploying Wordpress together with Mysql are introduced here.</p>
<div class="section" id="option-1-docker-compose">
<span id="wp-docker-compose"></span><h3>Option 1: Docker Compose<a class="headerlink" href="#option-1-docker-compose" title="Permalink to this headline">¶</a></h3>
<p>This is the recommended simple way - composing Mysql &amp; Wordpress.</p>
<p>Compose is a powerful way Docker employed for different situations. Using compose
we can setup Wordpress in one line in the same directory of
<a class="reference download internal" download="" href="../../_downloads/9643d689751ce51471baafd912334a13/docker-compose.yml"><code class="xref download docutils literal notranslate"><span class="pre">docker-compose.yml</span></code></a> file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span><span class="o">-</span><span class="n">compose</span> <span class="n">up</span> <span class="o">-</span><span class="n">d</span>
</pre></div>
</div>
<p>This will bring up the 2 containers. With another mysql container, the mysql DB
can be connected:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">--</span><span class="n">network</span> <span class="n">wordpress_default</span> <span class="o">-</span><span class="n">it</span> <span class="o">--</span><span class="n">rm</span> <span class="n">mysql</span><span class="p">:</span><span class="mf">5.7</span> <span class="n">mysql</span> <span class="o">-</span><span class="n">h</span> <span class="n">mysql</span> <span class="o">-</span><span class="n">uroot</span> <span class="o">-</span><span class="n">p</span>
</pre></div>
</div>
<p>The network name, wordpress_default is the name when Docker compse and run the
containers, wordpress and mysql.</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Don’t forget change the mysql’s root password.</p>
</div>
<p>Now visit the address in a browser:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span>
</pre></div>
</div>
<p>and you should see something like this:</p>
<a class="reference internal image-reference" href="../../_images/02-wordpress-init.png"><img alt="../../_images/02-wordpress-init.png" src="../../_images/02-wordpress-init.png" style="width: 320px;" /></a>
<p>We are deploying Mysql with Docker using Docker Compose method. So we need to tell
where Wordpress can find database. If you didn’t change anything else except password
in the download ‘docker-compse.yml’ file, you can set information in the page
like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">database</span> <span class="n">name</span><span class="p">:</span> <span class="n">my</span><span class="o">-</span><span class="n">wpdb</span>
<span class="n">database</span> <span class="n">user</span><span class="p">:</span> <span class="n">root</span>
<span class="n">database</span> <span class="n">host</span><span class="p">:</span> <span class="n">mysql</span>
<span class="n">db</span> <span class="n">password</span><span class="p">:</span> <span class="n">your</span><span class="o">-</span><span class="n">password</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../_images/09-wp-compose-init.png"><img alt="../../_images/09-wp-compose-init.png" src="../../_images/09-wp-compose-init.png" style="width: 480px;" /></a>
<p>In this page you may still have some trouble to connect database. See troubleshootings
<a class="reference internal" href="wp-troubles.html#trouble-compose-mysql"><span class="std std-ref">details for Docker network</span></a> for how to solve the
problem.</p>
<p>In the next page, you can create the administrator of your website.</p>
<a class="reference internal image-reference" href="../../_images/10-wp-compose-init.png"><img alt="../../_images/10-wp-compose-init.png" src="../../_images/10-wp-compose-init.png" style="width: 480px;" /></a>
<p>That’s it.</p>
</div>
<div class="section" id="option-2-independent-mysql-server">
<h3>Option 2: Independent Mysql Server<a class="headerlink" href="#option-2-independent-mysql-server" title="Permalink to this headline">¶</a></h3>
<p>Skip this part if you are trying docker for the first time.</p>
<p>In this way, Mysql is running without a docker container.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">pull</span> <span class="n">wordpress</span>
</pre></div>
</div>
<p>Once Wordpress image is ready, we can start and run our first web server like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="o">--</span><span class="n">name</span> <span class="n">wp</span> <span class="o">-</span><span class="n">e</span> <span class="n">WORDPRESS_DB_HOST</span><span class="o">=&lt;</span><span class="n">mysql</span><span class="o">-</span><span class="n">host</span><span class="o">&gt;</span><span class="p">:</span><span class="mi">3306</span> <span class="o">-</span><span class="n">e</span> <span class="n">WORDPRESS_DB_NAME</span><span class="o">=&lt;...&gt;</span> <span class="o">-</span><span class="n">e</span> <span class="n">WORDPRESS_DB_USER</span><span class="o">=&lt;</span><span class="n">user</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">e</span> <span class="n">WORDPRESS_DB_PASSWORD</span><span class="o">=&lt;</span><span class="n">user</span><span class="o">-</span><span class="n">pswd</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">dp</span> <span class="mi">80</span><span class="p">:</span><span class="mi">80</span> <span class="o">--</span><span class="n">rm</span> <span class="n">wordpress</span>
</pre></div>
</div>
<p>You should get something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">193e3</span><span class="n">fc1081e3167f631fe0b71a4fe64415a736fa64295488d8b70478287efd0</span>
</pre></div>
</div>
<p>Which is the container Id.</p>
<img alt="../../_images/01-wordpress-mysql.png" src="../../_images/01-wordpress-mysql.png" />
<p>You can visit the page now at:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="wordpress-hands-on">
<span id="wp-hands-on"></span><h2>Wordpress Hands on<a class="headerlink" href="#wordpress-hands-on" title="Permalink to this headline">¶</a></h2>
<p>Follow the previous step, setup your manager account, then your website dashboard
should look like this:</p>
<img alt="../../_images/03-wordpress-setup.png" src="../../_images/03-wordpress-setup.png" />
<p>To publish your first page, you can click <em>New</em> in the top banner or <em>Pages</em> in
navigator at the left side.</p>
<p>The page editing is basically <em>What You See Is What You Get</em>. You can <em>preview</em> or
see the final results in public site following the URL at the right side.</p>
<img alt="../../_images/04-wp-page0.png" src="../../_images/04-wp-page0.png" />
<p>Now you can publish the page. Your first website is working!</p>
<p>The next step is to consider hosting your website on a public accessible server.
Before doing this, you already got advantage that your website image can be moved
anywhere in a hole image of Docker. And many cloud service support Docker.</p>
<p>The first thing you might want to change is the site’s favicon. You can follow this
<a class="reference external" href="https://yoast.com/how-to-change-your-favicon-in-wordpress-a-step-by-step-guide/">blog</a>
to customize.</p>
<p>To get maximum visial effects of your site, you are suggested following some video
tutorial of Wordpress to get yourself familiar this it.</p>
</div>
<div class="section" id="publish-to-docker-hub">
<h2>Publish to Docker Hub<a class="headerlink" href="#publish-to-docker-hub" title="Permalink to this headline">¶</a></h2>
<p>Before moving your website from server to server, you’d better host your image
at Docker Hub.</p>
<p>Docker Hub is a cloud service free for saving Docker images. Before you can push
image to Docker Hub, you have to <a class="reference external" href="https://hub.docker.com/">register at Docker Hub</a>.</p>
<p>To push images up to Docker Hub after registering:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">login</span> <span class="o">--</span><span class="n">username</span> <span class="s1">&#39;account-id-you-just-created&#39;</span> <span class="o">--</span><span class="n">password</span><span class="o">=</span><span class="s1">&#39;your-passowrd&#39;</span>

    <span class="c1"># tag your image with a unique mark.</span>
    <span class="c1"># e.g. docker tag eb3 odysz/wordpress-acadynamo:1.1</span>
<span class="n">docker</span> <span class="n">tag</span> <span class="p">[</span><span class="n">first</span> <span class="mi">3</span> <span class="n">char</span> <span class="n">of</span> <span class="n">image</span> <span class="n">Id</span><span class="p">]</span> <span class="o">&lt;</span><span class="n">accout</span><span class="o">-</span><span class="n">Id</span><span class="o">&gt;/&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span>

    <span class="c1"># publish</span>
    <span class="c1"># e.g. docker push odysz/wordpress-acadynamo:1.1</span>
    <span class="n">docker</span> <span class="n">push</span> <span class="o">&lt;</span><span class="n">accout</span><span class="o">-</span><span class="n">Id</span><span class="o">&gt;/&lt;</span><span class="n">image</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">:</span><span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>For more details, see Docker Documents: <a class="reference external" href="https://docs.docker.com/engine/reference/commandline/push/">Docker Push</a>.</p>
</div>
<div class="section" id="play-with-docker-labs-optional">
<h2>Play with Docker Labs (Optional)<a class="headerlink" href="#play-with-docker-labs-optional" title="Permalink to this headline">¶</a></h2>
<p>Before publish your site, you’d better verify it at <a class="reference external" href="https://labs.play-with-docker.com/">Dock Labs</a>.</p>
<p>Now go to Docker Labs (click Labs at Docker Hub page). Once logged in and created
a new node, you can pull down your image uploaded just now. You can verify everyone
can work with it or can be used latter on other servers.</p>
<p>Once you sign up, you can login in with Docker and pull Wordpress and start it (
click ADD NEW INSTANCE):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">pull</span> <span class="n">wordpress</span>
<span class="n">docker</span> <span class="n">run</span> <span class="o">--</span><span class="n">name</span> <span class="n">wp</span> <span class="o">-</span><span class="n">e</span> <span class="n">WORDPRESS_DB_HOST</span><span class="o">=&lt;</span><span class="n">mysql</span><span class="o">-</span><span class="n">host</span><span class="o">&gt;</span><span class="p">:</span><span class="mi">3306</span> <span class="o">-</span><span class="n">e</span> <span class="n">WORDPRESS_DB_NAME</span><span class="o">=&lt;...&gt;</span> <span class="o">-</span><span class="n">e</span> <span class="n">WORDPRESS_DB_USER</span><span class="o">=&lt;</span><span class="n">user</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">e</span> <span class="n">WORDPRESS_DB_PASSWORD</span><span class="o">=&lt;</span><span class="n">user</span><span class="o">-</span><span class="n">pswd</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">dp</span> <span class="mi">80</span><span class="p">:</span><span class="mi">80</span> <span class="o">--</span><span class="n">rm</span> <span class="n">wordpress</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your connection is slow, you need key-in slowly.</p>
</div>
<p>Then copy the address to your browser’s.</p>
<img alt="../../_images/05-wp-docker-labs.png" src="../../_images/05-wp-docker-labs.png" />
<p>After the image is running, open the site by clicking the link shown above, you
should see the page:</p>
<img alt="../../_images/06-wp-docker-lab-page0.png" src="../../_images/06-wp-docker-lab-page0.png" />
<p>This is a quick way to verify your Docker image is setup / composed correctly and
can be re-deployed anywhere in the future.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="docker.html" class="btn btn-neutral float-right" title="Docker Quick Start" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="3steps.html" class="btn btn-neutral float-left" title="Tutorial: 3 steps setting up a website" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Odys Zhou.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>